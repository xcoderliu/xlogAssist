# xlogAssist - 日志分析工具

一个功能强大的前端日志分析工具，支持拖拽上传、正则匹配高亮、配置组管理、问题诊断和自定义下载等特性。

## 功能特性

- 📁 **拖拽上传**: 支持拖拽日志文件上传
- 🎨 **正则高亮**: 自定义正则表达式匹配和颜色高亮
- 🗂️ **配置组管理**: 按业务场景分组管理正则规则
- 🔍 **搜索功能**: 快速搜索日志内容
- 📋 **排查区**: 右键添加重要日志到排查区
- 🩺 **问题诊断**: 自动诊断日志中的问题
- 🌐 **自定义下载**: 从自定义源下载日志
- 💾 **本地存储**: 配置自动保存到本地

## 快速开始

1. 启动服务器:
   ```bash
   node server.js
   ```

2. 打开浏览器访问: `http://localhost:3000`

3. 拖拽日志文件到上传区域或点击选择文件

## 配置组使用指南

### 1. 创建配置组
1. 点击右下角"配置"按钮
2. 切换到"配置组"标签页
3. 输入配置组名称（如"登录问题"）
4. 点击"创建配置组"

### 2. 添加规则到配置组
1. 在配置组列表中点击"编辑"按钮
2. 在规则管理界面中，从"添加规则到配置组"区域选择规则
3. 点击"添加"按钮将规则添加到配置组

### 3. 启用配置组
1. 在配置组列表中勾选需要启用的配置组
2. 系统会自动应用该配置组中的所有规则

### 4. 多配置组组合
- 可以同时启用多个配置组
- 系统会合并所有启用配置组中的规则
- 方便按不同业务场景组合使用

## 正则规则语法

支持标准的JavaScript正则表达式语法：

- `error|ERROR` - 匹配error或ERROR
- `\d{4}-\d{2}-\d{2}` - 匹配日期格式
- `(warning|WARN)` - 匹配warning或WARN
- `.*exception.*` - 匹配包含exception的行

## 示例配置

### 错误排查配置组
- 规则1: `error|ERROR` - 红色背景，白色文字
- 规则2: `exception|Exception` - 橙色背景，黑色文字

### 性能监控配置组  
- 规则1: `timeout|Timeout` - 黄色背景，黑色文字
- 规则2: `slow|Slow` - 紫色背景，白色文字

### 登录问题配置组
- 规则1: `login|Login` - 蓝色背景，白色文字
- 规则2: `auth|Auth` - 绿色背景，黑色文字

## 问题诊断功能

### 诊断规则配置
1. 点击右下角"配置"按钮
2. 切换到"诊断规则"标签页
3. 填写规则信息：
   - **规则名称**: 诊断规则的名称
   - **规则描述**: 问题的详细描述
   - **匹配模式**: 每行一个正则表达式模式
   - **严重程度**: 错误/警告/信息
   - **问题类别**: 问题分类标识
   - **解决方案**: 推荐的解决方案

### 执行诊断
1. 在右侧区域切换到"诊断区"标签页
2. 点击"执行诊断"按钮开始分析
3. 查看诊断结果统计和详细问题列表
4. 点击诊断结果可跳转到对应的日志行

### 诊断结果统计
- **总问题数**: 发现的所有问题数量
- **严重问题**: 严重程度为错误的问题
- **警告问题**: 严重程度为警告的问题
- **信息问题**: 严重程度为信息的问题

## 自定义下载功能

### 自定义下载源
1. 在左侧上传区域点击"自定义下载日志"
2. 系统会自动扫描 `customDownLoadLogSources` 目录下的自定义源
3. 选择需要下载的日志源
4. 点击下载按钮获取日志数据

### 创建自定义下载源
1. 在 `customDownLoadLogSources` 目录下创建子目录
2. 在子目录中创建 `index.html` 文件
3. 实现自定义的日志获取逻辑
4. 使用 `window.app.addFormattedLogs()` 方法添加日志到分析器

## 文件格式支持

- 文本文件 (.txt)
- 日志文件 (.log)
- JSON文件 (.json)
- 其他文本格式

## 快捷键

- `Enter` - 在搜索框中按回车执行搜索
- 右键点击 - 打开上下文菜单
- `Ctrl/Cmd + C` - 复制选中的日志行

## 技术栈

- 前端: HTML5, CSS3, JavaScript (ES6+)
- 后端: Node.js, Express
- 存储: LocalStorage (配置持久化)

## 开发说明

项目结构:
```
xlogAssist/
├── index.html                  # 主页面
├── styles.css                  # 样式文件
├── main.js                     # 应用入口
├── core.js                     # 核心逻辑
├── fileHandler.js              # 文件处理模块
├── searchFilter.js             # 搜索过滤模块
├── configManager.js            # 配置管理模块
├── uiRenderer.js               # UI渲染模块
├── contextMenu.js              # 右键菜单模块
├── investigation.js            # 排查区模块
├── diagnosis.js                # 问题诊断模块
├── export.js                   # 导出模块
├── resizer.js                  # 分隔条模块
├── customDownloadManager.js    # 自定义下载管理模块
├── server.js                   # 后端服务器
├── package.json                # 项目配置
├── README.md                   # 说明文档
└── customDownLoadLogSources/   # 自定义下载源目录
    └── SensorLog/              # 示例自定义下载源
        └── index.html          # 自定义下载页面
```

## 许可证

MIT License